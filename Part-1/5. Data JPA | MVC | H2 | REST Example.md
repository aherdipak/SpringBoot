## Spring Boot Applcation( JPA | MVC | H2 Database | REST Example)

```

	@RequestMapping("/allStudent")
	@ResponseBody
	public String allStudent() {
		return stdRepo.findAll().toString();
	}
	
//	@RequestMapping("/student/102")
//	@ResponseBody
//	public String getStudent() {
//		return stdRepo.findById(102).toString();
//	}
	
	@RequestMapping("/student/{stdId}")
	@ResponseBody
	public String getStudent(@PathVariable("stdId")int stdId) {
		return stdRepo.findById(stdId).toString();
	}
```

![Screenshot 2019-07-07 at 5 27 09 PM](https://user-images.githubusercontent.com/35020560/60767965-bf0c1480-a0dc-11e9-9b15-e4a05cdbb95c.png)

![Screenshot 2019-07-07 at 5 26 53 PM](https://user-images.githubusercontent.com/35020560/60767969-d1864e00-a0dc-11e9-814d-4800a3a20953.png)


I just have one concern here, The concern is I want this data in JSON format.
Normally we share data either JSON or XML format. The data on above screen shot is not appropriate. In this case, how will another service will understand what you are sending. In this case we need to convert our response in JSON format.

So lets change some code here, In StudentRepo interface we have extended `CrudRepository` here instead of having CrudRepository lets use `JpaRepository` so that will get some extra features becouse JpaRepository is an interface extends Pagin and sortingRepository which is indirectly extended CrudRepository So we have all the features of CrudRepository + Etra features.

Ex. When I say findAll() it should return a list because in code repository it returns Interable.

#### /StudentDao.java
```
package com.dac.starter.dao;

import org.springframework.data.jpa.repository.JpaRepository;

import com.dac.starter.model.Student;

public interface StudentDao extends JpaRepository<Student, Integer>{

}

```

#### /StudentController.java
```
@Controller
public class StudentController {

	@Autowired
	StudentDao stdDao;
	
	@RequestMapping("/allStudent")
	@ResponseBody
	public List<Student> allStudent() {
		return stdDao.findAll();
	}
	

	@RequestMapping("/student/{stdId}")
	@ResponseBody
	public Optional<Student> getStudent(@PathVariable("stdId")int stdId) {
		return stdDao.findById(stdId);
	}
}
```
![Screenshot 2019-07-07 at 5 54 57 PM](https://user-images.githubusercontent.com/35020560/60772351-bfbf9d80-a112-11e9-81d3-9240083505f6.png)

![Screenshot 2019-07-07 at 5 54 08 PM](https://user-images.githubusercontent.com/35020560/60772356-d5cd5e00-a112-11e9-9e9c-e96d4ef1fd2e.png)

![Screenshot 2019-07-07 at 5 54 47 PM](https://user-images.githubusercontent.com/35020560/60772359-e5e53d80-a112-11e9-944c-2ee0fe93b33f.png)

![Screenshot 2019-07-07 at 5 54 22 PM](https://user-images.githubusercontent.com/35020560/60772362-f1386900-a112-11e9-9823-8cbadce24030.png)

## Spring Boot Applcation (POSTMAN)
Above Result's using POSTMAN client.

![Screenshot 2019-07-09 at 10 49 55 PM](https://user-images.githubusercontent.com/35020560/60911098-0f7f9f80-a2a0-11e9-8f12-1cd895802e80.png)

If user wants to get response in an `XML` format then. We have to just configure header in the postman With the key `Accept` and value `application/xml` and send `GET` request to the server.

![Screenshot 2019-07-09 at 10 50 15 PM](https://user-images.githubusercontent.com/35020560/60911139-26be8d00-a2a0-11e9-80dc-9157e1becccd.png)

In the above image we get an empty response with response status code `406 Not Acceptable`.

To convert JSON data we have lib called `Jackson-core.jar`, but here we don't have lib to convert response in `XML` format for that We required `Jackson Data Format XML` jar.

Note: Here we should have the same version of both the lib.

Get dependency of `Jackson Data Format XML` jar from [mvnrepository](https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.9.9) and update in pom.xml relaunch the application and test it.	

![Screenshot 2019-07-09 at 11 09 36 PM](https://user-images.githubusercontent.com/35020560/60911880-cb8d9a00-a2a1-11e9-91f2-f03ceaf738a1.png)


#### How to restrict application to create specific response (XML,JSON)?

Make change in @RequestMapping like `@RequestMapping(path="/allStudent",produces = {"application/xml"})` and relaunch application and test it.

```
	@RequestMapping(path="/allStudent",produces = {"application/xml"}) // It should produces only XMl response 
	@ResponseBody
	public List<Student> allStudent() {
		return stdDao.findAll();
	}
```

![Screenshot 2019-07-09 at 11 14 30 PM](https://user-images.githubusercontent.com/35020560/60912271-9fbee400-a2a2-11e9-97da-8e3ebfd7694d.png)


![Screenshot 2019-07-09 at 11 14 18 PM](https://user-images.githubusercontent.com/35020560/60912017-10b1cc00-a2a2-11e9-8ddc-b55b1a99a03a.png)




